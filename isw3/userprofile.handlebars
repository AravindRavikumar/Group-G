

<script type="text/javascript">

$(document).ready(function () {
    
    

    //set window size equal to window size
    function setHeight() {
        windowHeight = $(window).innerHeight();
        $('.sidebar').css('min-height', windowHeight);
    };
    setHeight();
    
    $(window).resize(function() {
        setHeight();
    });




    $('.chatHead').click(function(){
        $('.chatBody').slideToggle();
    });

    $('.msgHead').click(function(){
        $('.msgWrap').slideToggle();
    });

    $('.close').click(function(){
        $('.msgBox').hide();
    });

    //initially msgChat box hide
    $('.msgBox').hide();

    
    //show msgChatBox on user click
    $(document).on('click','.user',function(){
        $('.msgWrap').show();
        $('.msgBox').show();
        //var chatUser=this.id;
        document.getElementById("demo").innerHTML = this.id;
    });  
     $('.machineRegistrationForm').click(function(){
        $('.Main').hide();
        $('.UPDATE').hide();
        $('.Static').hide();
        $('.VIEW').show();
      // alert("test passed");
    });
    $('.viewProfile').click(function(){
        //$('.UPDATE').hide();
        $('.Main').hide();
        $('.VIEW').hide();
        $('.Static').hide();
        $('.UPDATE').show();
      // alert("test passed");
    });
    $('.dynamicProfile').click(function(){
        //$('.UPDATE').hide();
        $('.UPDATE').hide();
        $('.VIEW').hide();
        $('.Static').hide();
        $('.Main').show();
      // alert("test passed");
    });

    $('.staticProfile').click(function(){
        //$('.UPDATE').hide();
        $('.UPDATE').hide();
        $('.VIEW').hide();
        $('.Main').hide();
        $('.Static').show();
        

      // alert("test passed");
    });
    


    /*
    $('.form-control').keypress(function(e){
        if(e.keyCode== 13){
            var msg= $(this).val();
            $(this).val("");
            $("<div class='msgB'>"+ msg + "</div>").insertBefore('.msg_insert');
            $('.msgBody').scrollTop($('.msgBody')[0].scrollHeight);
        }
    });
    */
    
    

    
    var socket= io.connect();
    var $msgA= $('#msgA');
    var $msgB= $('#msgB');
    var $user= $('#user');
    
    
        
    var loginUser = "{{ data.username }}";
    
    //if new user login then update to other
    socket.emit('newUser', loginUser, function(data){});


    //update user in online list
    socket.on('getUsers', function(data){
        //add all online user
        $('.user').remove();
        for(i=0; i<data.length; i++){
            //alert(data[i]);
            if(data[i]!== loginUser){
                $("div.insertUser").append("<div class='user' id='"+data[i]+"'>" + data[i] + "</div>");
                $('.chatBody').scrollTop($('.chatBody')[0].scrollHeight);
            }
        }

    });

                  
        



    //send msg to socket
    $('.form-control').keypress(function(e){
        if(e.keyCode== 13){
            e.preventDefault();
            var msg= $(this).val();
            $(this).val("");
            socket.emit('msgSent', loginUser+" says:- "+msg);
            
        }
    });

    //receiving msg from socket and add into msgBox
    socket.on('newMsg', function(data){
        $("<div class='msgB'>"+ data.msg + "</div>").insertBefore('.msg_insert');
        $('.msgBody').scrollTop($('.msgBody')[0].scrollHeight);
    });
    

    
    //Update temperature
    var tmp;
    socket.on('updateTemp', function(data){
        tmp =data;
        //document.getElementById('lbl').innerHTML = data;
        google.charts.setOnLoadCallback(drawGauge);
        if(tmp>32){
            $('.tempHigh').show();
            $('.tempLow').hide();
        }
        else{
            $('.tempHigh').hide();
            $('.tempLow').show();
        }

    });

    
    //alert(tmp);
    google.charts.load('current', {'packages':['gauge']});
    //google.charts.setOnLoadCallback(drawGauge);

    var gaugeOptions = {min: 0, max: 100, yellowFrom: 40, yellowTo: 50,
    redFrom: 50, redTo: 280, minorTicks: 10};
    var gauge;

    function drawGauge() {
        gaugeData = new google.visualization.DataTable();
        gaugeData.addColumn('number', '{{loginUser}}');
        gaugeData.addRows(1);
        
        gaugeData.setCell(0, 0, tmp);
        gauge = new google.visualization.Gauge(document.getElementById('gauge_div'));
        gauge.draw(gaugeData, gaugeOptions);
    }

    


    //sending machine status
    $("input[name='on']").click(function(){
        var checkValue= $('input[name=on]:checked').val();
        //alert(checkValue);
        socket.emit('getMachineStatus',checkValue );
    });
    //get and set machine status
    socket.on('setMachineStatus', function(data){
        document.getElementById('machineStatus').textContent = data;
          
    });
    


    
});
    
</script>

<!--- Main WebPage --->

<!DOCTYPE html>
<html>
<head>
	<!--Start of meta tags-->
	<meta charset="utf-8" />
	<meta name="description" content="Web site login page" />
	<!--/.need change-->
	<!--description about the website-->
	<meta name="keywords" content="Smart manufacturing,iiti,IIT Indore" />
	<meta name="author" content="Souvik Mandal, Saptarshi Ghosh, GVS Akhil, Rishika Patel, Aravind Ravikumar">
	<!--/.End of meta tags-->
	<title>
		<!--need change-->
		Page 
		<!--Add title-->
	</title>
	
	<!--Adding boostrap css file link-->
	<!--Need to change when uploading-->
	

	<link href="css/bootstrap.css" rel="stylesheet" /> 
	<!-- pulls in the main bootstrap content we need -->
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->


    <!--/.End of boostrap file link-->
    <link href="css/page.css" rel="stylesheet" />
</head>
<body class="classBody">
<div id="box1">
	<nav class="navbar navbar-inverse navbar_ab navbar-fixed-top">
  		<div class="container-fluid">
    
    		<div class="navbar-header">
      			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        		<span class="sr-only">Toggle navigation</span>
        		<span class="icon-bar"></span>
        		<span class="icon-bar"></span>
        		<span class="icon-bar"></span>
      			</button>
      			<a class="navbar-brand temp changecolor" href="#" style="font-size: 220%">ISW</a>
    		</div>

    
    		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      			<ul class="nav navbar-nav">
        		<li >
        		<a href="#" class="navbar_links_font">Home 
        		<span class="sr-only">(current)</span>
        		</a>
        		</li>
        		<li>
        		<a href="#" class="navbar_links_font">Link</a>
        		</li>
        		<li class="dropdown">
          		<a href="#" class="dropdown-toggle navbar_links_font" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">More 
          		<span class="caret"></span>
          		</a>
          		<ul class="dropdown-menu">
            		<li><a href="#" class="changecolor">Action</a></li>
            		<li><a href="#">Another action</a></li>
            		<li><a href="#">Something else here</a></li>
            		<li role="separator" class="divider"></li>
            		<li><a href="#">Separated link</a></li>
            		<li role="separator" class="divider"></li>
            		<li><a href="#">One more separated link</a></li>
          		</ul>
        		</li>
      			</ul>
      			<ul class="nav navbar-nav navbar-right">
			        <li><a href="#" class="navbar_links_font">Link</a></li>
              <li class="dropdown">
              <a href="#" class="dropdown-toggle profile_icon" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="padding: 0px">
                <img src="images/profile_1x.png" alt="profile icon" />
              </a>
              <ul class="dropdown-menu">
                <li><a href="#" class="changecolor">View Profile</a></li>
                <li><a href="#">Update Profile</a></li>
                <li><a href="#">Dynamic Profile</a></li>
                <li><a href="#">Manual Profile</a></li>
              </ul>
            </li>     
      			</ul>
			</div>
		</div>
	</nav>
  <div class="container-fluid row" id="textfirstpage">
  		


		<div class="jumbotron col-xs-6">
    		<h1>System Status</h1> 
  		</div>    
  		<div class="jumbotron col-xs-6 alert-success" role="alert">
  			<h1 >Active</h1>
		</div>	
	<!--./End of text container-->
  </div>
  
  <div class="container-fluid">
    <div class="col-sm-6">
      <div class="opn_on">
     <div class="col-xs-8 opn_class"><h2 style="margin: 0px;"> ON </h2></div>
      <div class="col-xs-4 dropdown_class">
          <button type="button" class="btn btn-info" data-toggle="collapse" data-target="#on_options">
              <span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>
          </button>
    </div>
    <div class="collapse" id="on_options">
      <label>
        <input type="radio" name="#" value="#">Printing 
      </label>
      <br/>
      <label>
        <input type="radio" name="" value="">Product Loading  
      </label>
      <br/>
      <label>
        <input type="radio" name="">Preheating
      </label>
      <br/>
      <label>
        <input type="radio" name="">Positioning the extruder  
      </label>
      <br/>
      <label>
        <input type="radio" name="">Print started 
      </label>
      <br/>
      <label>
        <input type="radio" name="">Print completed 
      </label>
      <br/>
      <label>
        <input type="radio" name="">Auto homing 
      </label>
      <br/>
      <label>
        <input type="radio" name="">Ready to unloaded 
      </label>
      <br/>
      <label>
        <input type="radio" name=""> Unloaded 
      </label>
      <br/>

      </div>
</div>
<div class="opn_failed">
      <div class="col-xs-8 opn_class"><h2 style="margin: 0px;"> FAILED </h2></div>
      <div class="col-xs-4 dropdown_class">
          <button type="button" class="btn btn-info" data-toggle="collapse" data-target="#failed_options">
              <span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>
          </button>
    </div>
    <div class="collapse" id="failed_options">
      <label>
        <input type="radio" name="#" value="#">Component Assembly 1 
      </label>
      <br/>
      <label>
        <input type="radio" name="" value="">Component Assembly 2  
      </label>
      <br/>
      <label>
        <input type="radio" name="">Component Assembly 3 
      </label>
      <br/>
      <label>
        <input type="radio" name="">Component Assembly 4   
      </label>
      <br/>
      <label>
        <input type="radio" name="">Component Assembly 5  
      </label>
      <br/>
      
      </div>
    </div>
    </div> 

    <div class="col-sm-6" >
      
      <div class="opn_idle">
     <div class="col-xs-8 opn_class"><h2 style="margin: 0px;"> IDLE </h2></div>
      <div class="col-xs-4 dropdown_class">
          <button type="button" class="btn btn-info" data-toggle="collapse" data-target="#idle_options">
              <span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>
          </button>
    </div>
    <div class="collapse" id="idle_options">
          <h3>No Demand</h3>
            <label>
               <input type="radio" name="#" value="#">No product to load 
            </label>
            <br/>
            <label>
              <input type="radio" name="" value="">Product scheduled to load  
            </label>
            <h3>Material Unavailable</h3>
            <label>
              <input type="radio" name="">No Material to load
            </label>
            <br/>
            <label>
              <input type="radio" name="">Material refilled  <br/>
            </label>
            <h3>Power Failure</h3>
            <label>
              <input type="radio" name="">Power gone <br/>
            </label>
            <br/>
            <label>
              <input type="radio" name="">Power resume <br/>
            </label>
            <h3>Operator Unavailable</h3>
            <label>
              <input type="radio" name="">Operator busy with other work <br/>
            </label>
            <br/>
            <label>
              <input type="radio" name="">Operator Absent <br/>
            </label>
            <br/>
            <label>
              <input type="radio" name="">Operator arrive <br/>
            </label>
            <br/>
      </div>
</div>


    </div>
   </div>
   <script src="js/jquery.min.js"></script> <!-- /.jquery libraries -->
    <script src="js/bootstrap.min.js"></script> <!-- /.bootsrap libraries -->

<!--/.End of box1-->
</div>
